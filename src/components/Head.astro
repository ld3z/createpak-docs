---
import Default from '@astrojs/starlight/components/Head.astro';
import { getEntryBySlug } from 'astro:content';

const { id } = Astro.props;
const entry = id ? await getEntryBySlug('docs', id) : null;
const title = entry?.data.title || 'CreatePak Documentation';
const description = entry?.data.description;

// Generate OG image URL
const ogImageUrl = new URL(
  `/og/${id || 'index'}.png`,
  Astro.site || new URL('https://createpak-docs.vercel.app/')
).toString();
---

<Default {...Astro.props}><slot /></Default>

<!-- OpenGraph Tags -->
<meta property="og:title" content={title} />
{description && <meta property="og:description" content={description} />}
<meta property="og:image" content={ogImageUrl} />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />

<!-- Twitter Card Tags -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content={ogImageUrl} />